<div class="modal fade" id="callModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content call-modal-content">
            <div class="modal-body p-0">
                <div id="callInterface" class="text-center p-4">
                    <!-- Incoming call UI -->
                    <div id="incomingCallUI" style="display: none;">
                        <div class="mb-4">
                            <div class="avatar-container mx-auto mb-3 pulse">
                                <img id="incomingCallerAvatar" src="/images/default-user.png" class="rounded-circle" alt="Default Avatar" />
                            </div>
                            <h5 id="incomingCallerName" class="fw-bold text-white">Incoming Call</h5>
                            <p class="text-muted" id="incomingCallType" data-call-type="Đang gọi">Đang gọi</p>
                        </div>
                        <div class="d-flex justify-content-center gap-4">
                            <button class="btn btn-danger btn-lg rounded-circle call-button reject-button" id="rejectCallButton" title="Reject Call">
                                <i class="fas fa-phone-slash fa-lg"></i>
                            </button>
                            <button class="btn btn-success btn-lg rounded-circle call-button accept-button" id="acceptCallButton" title="Accept Call">
                                <i class="fas fa-phone fa-lg"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Active call UI -->
                    <div id="activeCallUI" style="display: none;">
                        <div class="position-relative video-container">
                            <video id="remoteVideo" class="w-100 rounded" style="max-height: 400px; background: #000;" autoplay></video>
                            <video id="localVideo" class="position-absolute rounded shadow-sm"
                                   style="width: 150px; height: 100px; top: 10px; right: 10px; background: #000;"
                                   autoplay muted></video>

                            <div id="audioCallAvatar" class="d-flex flex-column align-items-center justify-content-center"
                                 style="height: 300px; display: none;">
                                <div class="avatar-container mb-3 pulse">
                                    <img id="activeCallAvatar" src="/images/default-user.png" class="rounded-circle" alt="Default Avatar" />
                                </div>
                                <h5 id="activeCallUserName" class="fw-bold text-white">User Name</h5>
                                <p class="text-muted">Call duration: <span id="callDuration">00:00</span></p>
                                <div class="voice-wave" style="display: none;">
                                    <span></span><span></span><span></span>
                                </div>
                            </div>
                        </div>

                        <div class="call-controls d-flex justify-content-center gap-4 mt-4">
                            <button class="btn btn-secondary btn-lg rounded-circle call-control-btn" id="muteButton" title="Toggle Mute">
                                <i class="fas fa-microphone fa-lg"></i>
                            </button>
                            <button class="btn btn-secondary btn-lg rounded-circle call-control-btn" id="cameraButton" title="Toggle Camera" style="display: none;">
                                <i class="fas fa-video fa-lg"></i>
                            </button>
                            <button class="btn btn-danger btn-lg rounded-circle call-control-btn end-button" id="endCallButton" title="End Call">
                                <i class="fas fa-phone-slash fa-lg"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Outgoing call UI -->
                    <div id="outgoingCallUI" style="display: none;">
                        <div class="mb-4">
                            <div class="avatar-container mx-auto mb-3 pulse">
                                <img id="outgoingCallerAvatar" src="/images/default-user.png" class="rounded-circle" alt="Default Avatar" />
                            </div>
                            <h5 id="outgoingCallUserName" class="fw-bold text-white"></h5>
                            <p class="call-label" id="outgoingCallType" data-call-type=""></p>
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Calling...</span>
                            </div>
                        </div>
                        <button class="btn btn-danger btn-lg rounded-circle call-button reject-button" id="cancelCallButton" title="">
                            <i class="fas fa-phone-slash fa-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>